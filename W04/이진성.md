## Process Management

### About creation

Copy-on-write

- Prarent process create Child process
- Process Tree Structure 가 형성됨
- 프로세스는 자원 필요 : 운영체제로부터, 부모와 공유함
- 자원의 공유 : 부모와 공유, 일부를 공유, 전혀 공유하지 않음
- 수행 : 부모와 자식은 공존하며 수행되는 모델
- 주소 공간
    - 자식은 부모의 공간을 복사함 (binary, OS data)
    - 자식은 그 공간에 새로운 프로그램을 올림
- Unix
    - fork - system cal
    - fork → exec() : 새로운 프로그램을 메모리에 올림

### Termination

- exit : 마지막 명령을 수행한 후 운영체제에게 이를 알려줌
    - 자식이 부모에게 output data를 보냄 (wait system call)
- 부모 프로세스가 자식의 수행을 종료시킴 - abort
    - 자식이 할당 자원 한계를 넘는 경우
    - 할당된 태스크가 더 이상 필요하지 않음
    - 부모가 종료되는 경우

## System calls

- fork()를 하게되면, 그 다음 시점(코드)부터 실행하게 된다.
- execlp()는 새로운 프로그램으로 프로세스를 덮어씌우기 때문에 이후 코드는 실행되지 않도록 되는 시스템콜이다

### wait()

- 자식 프로세스를 만든 이후에 자식 프로세스가 종료될 때까지 부모 프로세스를 sleep(block) 시킨다
- 자식프로세스가 종료되면 커널은 부모 프로세스를 깨운다.

### exit()

- 자발적 종료 : 마지막 statement 이후 exit을 통해 자발적으로 종료함
- 비자발적종료 : 부모프로세스가 자식 프로세스를 강제로 종료, kill 커맨드, 부모가 종료하는 경우 종료됨.

### 프로세스간 협력

- 독립적 프로세스 : 각자의 주소 공간을 가지고 수행되므로 원칙적으로 하나의 프로세스는 다른 프로세스 수행에 영향을 미치지 못함
- 협력 프로세스 : 협력 매커니즘을 통해 하나의 프로세스가 다른 프로세스에 수행에 영향을 미칠 수 있음
    - message passing : 커널을 통해 메세지 전달 (공유 변수가 아님)
        - direct communication : 대상 프로세스 이름 명시적 표시
        - indirect comm : milbox, port를 통해 전달하는 방식
    - shared memory : 서로 다른 프로세스 간에 일부 주소 공간을 공유하게 함
    - thread : 하나의 프로세스이므로 협력 방식으로 보기 어려움

### CPU / IO Bursts in Program Execution


### CPU Scheduler / Dispatcher

- CPU Scheduler : ready 상태의 프로세스 중에서 이번에 cpu를 줄 프로세스를 고르는 것
- Dispatcher : CPU의 제어권을 CPU Scheduler에 의해 선택된 프로세스에게 넘긴다.
    - 이 과정에서 context switch가 발생한다.
- CPU 필요한 경우
    - nonpreemptive : 자진 반납
        - Running → blocked : IO 시스템 콜
        - Terminated
    - preemptive : 강제로 빼앗음
        - Running → Ready : 할당 시간 만료로 timer interrupt
        - Blocked → Ready : IO 완료 후 interrupt